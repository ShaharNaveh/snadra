[tox]
envlist =
	py37
	py38
	py39
	style
	docs
skip_missing_interpreters = true

[testenv]
deps =
	-r requirements/tests.txt

commands = 
	python -m pip list -vvv
	pytest --tb=short --basetemp={envtmpdir} {posargs:tests}
	pytest --doctest-modules --tb=short --basetemp={envtmpdir} {posargs:src}

[testenv:style]
deps =
	-r requirements/style.txt

commands =
	python -m pip list -vvv
	black --check {posargs:src tests}
	flake8 {posargs:src tests}
	isort --quiet --check-only {posargs:src tests}
	mypy {posargs:src tests}

[testenv:docs]
basepython=python3.8

deps =
	-r requirements/docs.txt

commands =
	python -m pip list -vvv
	sphinx-build -v -a -b html docs/source/ {envtmpdir}/html/
